<ion-header class="tabHeader">
  <ion-buttons>
    <ion-button icon-only (click)="cancel()">
      <ion-icon class="cancel" name="ios-close"></ion-icon>
    </ion-button>
  </ion-buttons>
  <ion-title class="tabHeading" no-padding>New journey</ion-title>
  <img id="headerLogo" src="/assets/images/LEVT_Logo_ohneSchrift.svg" alt="Logo" />
</ion-header>

<ion-content class="tabsContent">

    <div class="pictureFrame">
      <div class="frameLeft"></div>
    <div id="journeythumbnail">
      <img class="journeythumbnail" src="/assets/images/01.jpg" alt="Journeycover" />
    </div>
    <div class="frameRight"></div>
  </div>

    <ion-item no-padding no-margin lines="none" color="none">
      <ion-input id="journeyName" [(ngModel)]="data.currentJourney.journeyName" type="text" placeholder="Give your journey a name" no-padding no-margin
        maxlength="25"></ion-input>
    </ion-item>

    <ion-label class="categoriesHeading">When did you go there?</ion-label>
    <ion-item class="seasonYear">
    <ion-radio-group class="season" [(ngModel)]="data.currentJourney._seasonID">
      <ion-chip *ngFor="let s of data.seasons.seasons" >
        <ion-radio value={{s.seasonID}}></ion-radio>
        <ion-label class="labelsCategories">
         {{s.seasonName}}
        </ion-label>
      </ion-chip>
    </ion-radio-group>
    <div id="journeyYear">
      <ion-datetime [(ngModel)]="data.currentJourney.year" value="2019" placeholder="Year" displayFormat="YYYY" id="journeyYear"></ion-datetime>
    </div>
  </ion-item>

    <ion-item>
      <ion-input id="journeyDuration" [(ngModel)]="data.currentJourney.duration" placeholder="duration" inputmode="decimal" type="number">
      </ion-input>
    </ion-item>

    <ion-label class="categoriesHeading">Journey categories</ion-label>
    <ion-item id="journeyCategory">
    <ion-radio-group [(ngModel)]="data.currentJourney._journeyCategoryID">
      <ion-chip *ngFor="let c of data.journeyCategories.journeyCategories">
        <ion-radio value={{c.journeyCategoryID}}></ion-radio>
        <ion-label class="labelsCategories">
          {{c.journeyCategoryName}}
        </ion-label>
      </ion-chip>
    </ion-radio-group> 
  </ion-item>

  <ion-label class="categoriesHeading">Companionships</ion-label>
    <ion-item id="companionshipsCategory">
    <ion-radio-group [(ngModel)]="data.currentJourney._companionshipID" class="radioButtons">
      <ion-chip *ngFor="let cs of data.companionships.companionships">
        <ion-radio value={{cs.companionshipID}}></ion-radio>
        <ion-label class="labelsCategories">
          {{cs.companionshipType}}
        </ion-label>
      </ion-chip>
    </ion-radio-group>
  </ion-item>

  <ion-label class="categoriesHeading">Transportation</ion-label>
  <div id="transport">
    <ion-chip *ngFor="let t of data.transports.transports; let in=index">
      <ion-checkbox aria-checked="false" [(ngModel)]="transports[in]" id={{t.transportID}}></ion-checkbox> <!--[(ngModel)]="t.transportID"-->
      <ion-label class="labelsCategories">
          {{t.transportType}}
      </ion-label>
    </ion-chip>
  </div>

    <ion-item>
      <ion-label><b>Visited places</b></ion-label>
    </ion-item>
    <ion-item *ngIf="showNoPlaceWarning()">
      <ion-label color="warning" id="NoPlace"> You haven't added any places to your journey!</ion-label>
    </ion-item>
    <ion-item>
      <div id="alreadyAddedPlaces" class="gridContainer">
        <div class="grid-item" *ngFor="let p of data.currentJourney.places">
          <img class="pictureGrid" src="{{p.thumbnailSrc}}" alt="" />
          <div id="visitedPlaceName">{{p.name}}</div>
        </div>
        <div class="grid-item" (click)="goToAddPlace()">
          <ion-icon name="ios-add" class="addPlace"></ion-icon>
        </div>
      </div>
    </ion-item>

    <ion-item>
      <ion-label><b>Journey Details</b></ion-label>
    </ion-item>
    <ion-item>
      <ion-textarea [(ngModel)]="data.currentJourney.detail" placeholder="Tell us more about your Journey..." rows="8" background="light" id="journeyDetails">
      </ion-textarea>
    </ion-item>
    
    <ion-item>
      <ion-checkbox (click)="showCosts()"></ion-checkbox>
      <ion-label> add travel costs</ion-label>
    </ion-item>
    <div id="divideCosts" *ngIf="showC">
      <ion-item>
        <ion-checkbox (click)="divideCosts()"></ion-checkbox>
        <ion-label>divide costs by category</ion-label>
      </ion-item>
      <div *ngIf="divideC" id="journeycostsCategories">
        <ion-item *ngFor="let a of data.activities.activities; let in=index" >
          <ion-label>{{a.activityName}}</ion-label>
          <ion-input id="{{a.activityName}}" [(ngModel)]="costs[in]" class="costcategories" inputmode="decimal" type="number" placeholder="0"></ion-input>
          <ion-label>€</ion-label>
        </ion-item>

      </div>
      <div id="journeycostsTotal" *ngIf="!divideC">
        <ion-item>
          <ion-label>total costs</ion-label>
          <ion-input [(ngModel)]="data.currentJourney.totalCosts" id="totalcosts" class="costcategories" inputmode="decimal" type="number" placeholder="0">
          </ion-input>
          <ion-label>€</ion-label>
        </ion-item>
      </div>
    </div>

    <ion-button color="primary" expand="full"  (click)="saveJourney()">
      Finish
    </ion-button>
</ion-content>